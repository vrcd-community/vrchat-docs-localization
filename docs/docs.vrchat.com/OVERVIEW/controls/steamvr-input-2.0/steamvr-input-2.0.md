# SteamVR Input 2.0

随着 2024.3.1 版本的发布，VRChat 使用了一种更新、更先进和更强大的 SteamVR Input 2.0 输入方案。

如果您之前在 VRChat 或其他应用程序中使用过 SteamVR 绑定，那么您将会对绑定过程非常熟悉。然而，在 Input 2.0 中，我们添加了一个更广泛的可绑定动作列表，并且我们为不同的条件下正确地定义了我们的动作集。

您会发现可以将 “移动” 绑定到 Index 控制器的触控板上，或者将同时按下多个按键定义为一个新行为，以此启用或禁用您的个人镜子、聊天气泡或相机。

Input 2.0 还解锁了骨骼输入，这使得您在使用 VR 手柄和 PC 上的手部追踪时能够实现更好的手部姿势。

::: warning 🚧仅限 SteamVR !
SteamVR Input 2.0 是一个专门针对 SteamVR 的功能！如果您通过 Viveport 或 Meta 的 PC 应用在 PC 上游玩 VRChat，您将无法使用自定义绑定、骨骼输入以及其他的独特功能。

Input 2.0 在独立设备如 Quest 或 Pico 上同样不可用。
:::

## 自定义绑定

Input 2.0 为用户提供了大量的自定义绑定控制选项。您可以在 VR 中或在 PC 桌面上自定义您的控制绑定。

从 PC 桌面自定您的绑定：

    1.启动 SteamVR，并确保您要使用的控制器已打开。
    我们建议在调整新绑定时打开 VRChat 进行测试。

    2.在 SteamVR 桌面应用程序中，点击左上角的菜单图标并启动“设置”。

    3.在控制器页面，按 “显示绑定界面（Show Binding UI）” 以启动绑定菜单。

    4.在绑定菜单中选择 VRChat。

如果您想在 VR 中自定您的绑定，可以在 VRChat 中打开主菜单（通过 SteamVR 运行时），前往控制页面，然后按“编辑 SteamVR 输入绑定”。这应该会在您的 VR 头显中的 SteamVR 覆盖层中打开 SteamVR 绑定。

如果您想从一组未更改过的的绑定开始自定。在绑定菜单中选择 “VRChat” ，找到您当前控制器的 “VRChat 默认绑定（VRChat Default Bindings）”，然后选择激活（Activate）。请注意，绑定使用 Steam 创意工坊 进行分发，因此加载可能需要一些时间。

在“当前绑定（Current Binding）”下，按“编辑（Edit）”以打开完整的绑定配置菜单。该菜单包含多个页面的动作集和每个控制器的配置。

<center>

![img](https://cn-nb1.rains3.com/docs-image/controls/Changing-Bindings-for-Different-Controllers.png)

</center>

::: tip 📘 为不同控制器更改绑定
如果您需要为不同的控制器设置绑定，可以在“更改 VRChat 的绑定(Change Bindings for VRChat)”屏幕中点击“当前控制器 (Current Controller)”下的控制器名称，然后选择您的控制器类型：

![img](https://cn-nb1.rains3.com/docs-image/controls/steamvr-input-20-1.png)
:::

### 动作集

动作集定义了特定条件下的的动作组。动作是用户可以绑定到控制器上的行为，例如移动、选择、调出相机或个人镜子。

不同的动作会在各自不同的动作集中生效。例如，**action_menu** 动作集中的 `axis` 动作仅适用于圆盘菜单，而 `gesture_` 动作仅在 **全局（globle）** 动作集中可用。

VRChat 有四个动作集分别用于不同的条件下：

- **全局（globle）**：适用于所有上下文的全局操作。

- **单手操作（one_hand）**: 单手操作，当一个控制器关闭或不可用时。此动作集默认是镜像的。

- **菜单（menu）**：菜单操作，用于快捷导航和主菜单。此操作集默认是镜像的。

- **圆盘菜单（action_menu）**: 圆盘菜单操作，用于圆盘动作菜单。此动作集默认是镜像的。

**全局（globle）**绑定将始终处于生效状态，除非在另一个动作集（Action Set）中绑定了相同的输入 - 在这种情况下，除非您处于另一个动作集的条件下，否则全局绑定将始终处于生效状态。

::: warning 🚧添加/移除绑定失效了/我找不到绑定怎么办？！

确保您在每个动作集中检查您的绑定，以确保该动作在所有动作集中都已添加或移除。特别是，**全局（global）** 和 **单手操作（one_hand）** 中有很多互通的动作！

如果找不到绑定，请确保您检查其他动作集，因为许多绑定仅在某些动作集中可用。此外，请确保您使用的是正确类型的绑定 - 一些绑定只能绑定到 Vector1（例如滚动）或 Vector2 输入（例如摇杆位置）上。

### 绑定

::: tip 📘实时编辑您的绑定！

绑定可以即时编辑和测试。只要您更改了绑定，它会被立即保存并应用，让您可以立即测试您想要的新的控制方式！:::

#### 控制源模式

要将动作绑定到控制源的输入，每个控制源（如按钮、摇杆或触控板）必须设置至少一种控制源模式，以定义可用于绑定的输入。

例如，摇杆控制源可以用作摇杆（具有二维的位置、触摸和点击输入数据）、方向键（具有中心、北、南、东和西输入数据）、滚轮（仅具有一个滚动输入数据）等。每个动作集中的每个控制都可以添加多个控制模式，这些模式可以同时启用。

一旦您选择了控制模式，将会出现一个可用的输入列表。对于每个输入，您都可以绑定一个动作。某个动作可以同时绑定到多个输入中。

某些控制模式具有额外的配置选项。您可以通过控制源模式右下角的齿轮图标查看这些额外的设置。例如，设置为摇杆模式的触控板输入可能具有设置死区和最大百分比的选项，这使得您能更容易的控制它。您还可以使用这些选项来补偿可能有点坏掉的控制器摇杆。

镜像模式可以通过特定动作集的“镜像模式”选项进行切换。镜像模式会自动将右手控制器的绑定映射为与左手相同的绑定。

我们通常建议在可用的情况下将镜模式像保持启用，除非您有特定需求的绑定方案。

#### Chords 和弦

**和弦**允许您创建一个绑定，该绑定需要同时触发多个输入（按下多个按键）才能激活一个动作。

在创建和弦时，您首先选择一个动作，然后选择必须处于活动状态的输入组合。可用的输入基于不同控制器的使用方式，因此请确保在设置和弦之前先配置这些。

#### 保存绑定

虽然您的绑定会自动保存，您可以通过按“保存个人绑定（Save Personal Binding）”并添加标题和描述来保存预设。同样，您可以通过选择“发布到创意工坊（Publish to Workshop）”将您的预设发布到 Steam 创意工坊。

::: tip 📘我搞乱了我的绑定！
如果你遇到了糟糕的绑定设置，你可以随时返回默认的动作集。[前往绑定菜单](#自定义绑定)，方法是在 VR 中（通过打开 SteamVR 设置）或在 PC 桌面上（通过打开 SteamVR 设置菜单 -> 控制器（Controllers） -> 显示绑定用户界面（Show Binding UI）。

SteamVR 绑定不会阻止您解除绑定某些重要的操作（如菜单或移动操作），也不会警告绑定冲突（如多个输入绑定到不同操作集中的同一操作），因此在创建绑定时请一定小心。:::

#### 绑定术语表

- **绑定（Bindings）**：一整套输入与动作之间的绑定，可以在 Steam 创意工坊中保存和分享。

- **动作（Actions）**：可以绑定到输入或和弦的行为，例如移动、选择或调出相机或个人镜子。

- **动作集（Action Set）**：一组与特定上下文相对应的动作，例如使用菜单或动作菜单，或在任何上下文中可用的全局动作。

- **控制源（Control Source）**：控制器上的特定执行器，如操纵杆、扳机、按钮或触控板。

- **控制源模式（Control Source Mode）**：一种映射，定义了控制源的运动或传感器如何被转换为输入数据。例如，触控板可以映射为方向键或按钮，而操纵杆可以映射为操纵杆或滚轮。

- **输入（Input）**：从控制器的特定动作或传感器中读取，通过控制源模式进行转换。例如，按钮的控制源模式可能可以提供触摸、按压、保持或双击输入。

## 骨骼输入

骨骼输入允许 VR 控制器向 VRChat 提供尽可能准确的姿势，而无需对每个控制器进行特定支持。

骨骼输入让 VRChat 处理从增强的控制器姿势（如 HTC Vive Wand 和 Oculus/Quest Touch 控制器）到使用兼容硬件的手部追踪时的完整手部姿势的所有内容。

### 禁用骨骼输入

如果您不喜欢特定模型的骨骼输入外观，我们在模型的圆盘菜单中的表情菜单中提供了一个名为“传统手指”的每个模型独立的切换选项。开启后，（例如基于 Quest 或 Index 控制器）的手指追踪将通过我们过去为 Index 控制器使用的方法进行处理。这个切换可以为每个模型设置独立的开启或关闭状态。普通的手部追踪将忽略此开关，因为它与传统方法不兼容。

可以通过在主菜单的控制页面中禁用“模型使用手指追踪”来全局关闭骨骼输入。当关闭此选项时，即使有骨骼追踪数据，模型的手也会恢复为动画状态。手势参数检测，包括依赖于手指追踪的检测，仍然会正常工作，像往常一样，手势切换将影响手的动画方式，但这个新的切换选项可以防止任何骨骼追踪应用于当前模型的手上。

## 手部追踪

VRChat 通过 SteamVR Input 2.0 API 支持完整的手部追踪（来自摄像头追踪、手套和其他技术）。与 Quest 版本的 VRChat 一样，这允许您使用手部不仅可以动画化您的虚拟形象，还可以作为导航菜单、切换麦克风以及一些通常使用控制器的输入。

像任何 VR 应用程序一样，VRChat 需要知道何时可以使用完整的手部追踪。SteamVR 允许任何类型的控制器提供手部骨架，而不仅仅是基于摄像头的追踪系统，其中一些将无法实现完整的手部追踪。SteamVR API 提供一个值，用于描述骨架的高保真度，只有最高保真度的骨架才能用于完整的手部追踪。每当可用完整身份骨架时，VRChat 将在输入中使用它(除了角色动画)。

在 SteamVR 生态中，控制器支持（包括虚拟控制器如手）由驱动程序提供，这是一个处理一个或多个控制器数据的插件。要使手部追踪正常工作，必须有一个驱动程序存在并提供相关信息。在大多数情况下，这将作为硬件安装和设置过程的一部分进行处理。如果没有，您可能需要手动安装或更新它。

您可以通过进入 SteamVR 设置，选择“启动/关闭”页面，然后点击“管理加载项”来查看您安装了哪些第三方（非 Valve）的驱动程序

<center>

![SteamVR 加载项](https://cn-nb1.rains3.com/docs-image/controls/Hand-Tracking.png)

</center>

您的驱动程序可能有自己的配置设置。由于没有标准位置，它们可能位于不同的地方。您的驱动程序可能会提供有关如何使用这些设置的文档。

如果您是驱动程序作者，并且您的驱动程序在 VRChat 中的手部追踪表现不如预期，请参阅我们的 SteamVR 骨骼手部追踪驱动程序指南。（注意：此页面旨在用于高级驱动程序开发，而非一般用户）