# IK 2.0 功能和选项

IK 2.0 是对 VRChat 追踪系统的全面改进。这包括支持更多追踪点、校准缓存、新的 IK 设置等。

值得注意的是，这些变化不仅仅针对全身追踪用户——它们也会改善使用3点追踪的用户的体验！

![img](https://cn-nb1.rains3.com/docs-image/controls/ik-20-features-and-options-1.png)

*这是新的 IK 2.0 设置屏幕。您可以在下方看到对多出来的按钮的完整解释。*

## 在传统 IK 和 IK 2.0 之间进行切换

此按钮将在较旧的旧版 IK 行为和新的 IK 2.0 行为之间切换。这个切换仅影响 IK 驱动的 虚拟形象 的动作。新的追踪器校准检测和缓存方案不会切换到旧的行为。

例如，新的行为——忽略远离身体的追踪器，将不受此切换的影响。此外，无论切换到哪种状态，`--calibration-range="0.6"`的启动选项都会起作用。

作为负面效果，虽然目前校准缓存也可能在传统模式下工作，但我们无意为这种传统模式添加新功能或对其进行维护。**注意：在将来的某个时候，可能会删除此旧版切换开关。**

## 虚拟形象测量

在旧版本的 VRChat 中，所有虚拟形象都是通过手臂跨度来测量的。但是，现在可以通过臂展或虚拟形象高度进行测量。

![img](https://cn-nb1.rains3.com/docs-image/controls/ik-20-features-and-options-2.gif)

此测量值用于将虚拟形象与您的现实生活中的身体相匹配。只需在设置之间切换即可找到最适合您的设置。在我们的测试中，按高度测量的模式往往更适合全身追踪。

## 锁类型

这些选项定义了脊柱如何锁定到追踪器位置。

![img](https://cn-nb1.rains3.com/docs-image/controls/ik-20-features-and-options-3.gif)

锁定髋关节将严格执行臀部跟踪，并允许头部位置漂移以避免奇怪的脊柱角度。在此模式下，可选的胸部追踪器只负责旋转。

锁定头部将严格执行头部/视角位置，并允许臀部位置漂移以避免奇怪的脊柱角度。在此模式下，可选的胸部追踪器也只负责旋转。

锁定两者将严格执行头部和臀部位置，这可能会导致为了适应这些限制而出现奇怪的脊椎或颈部角度。在此模式下，可选的胸部追踪器将同时跟踪旋转和位置。

## 运动动画

![img](https://cn-nb1.rains3.com/docs-image/controls/ik-20-features-and-options-4.png)

此切换仅在全身和 IK 2.0 模式下显示（在旧版 IK 中不显示）。它可以禁用虚拟形象上的运动动画，以及可能导致全身追踪出现问题的基础层蹲伏和俯卧动画。

当使用此开关停用运动时，虚拟形象的基础层动画将被静态站立姿势所取代，该姿势在 FBT 中可能表现得更好。在新切换的默认运动活动位置，虚拟形象的现有基础层将像以前一样使用（不变）。这意味着，如果虚拟形象的动画器也禁用了 FBT 运动，那么无论此开关的状态如何，它都将保持停用运动的状态。

## 新的启动选项

**--custom-arm-ratio="0.4537"** - 调整在通过手臂测量模式使用时用于缩放虚拟形象的比例。"0.4537"是默认值，更小的值，如"0.415"，可能会提供更好的适配。

**--disable-shoulder-tracking** - 使用它来避免某些类型的仅基于 IMU 的手臂追踪器出现问题。

**--enable-ik-debug-logging** - 将有关 IK 的其他输出添加到日志中。在报告 IK 的错误或问题时使用此选项。

**--calibration-range="0.6"** - 确定追踪器将会在模型上被绑定点吸附的最远距离（以米为单位）。默认值定义 0.6 米（60 厘米）的球体。这适用于脚、大腿、髋部、上臂和胸部追踪器。

**--freeze-tracking-on-disconnect** - 启用此功能将使追踪器在与玩家断开连接时相对于玩家冻结在原地。重新校准可以移除冻结的追踪器。如果您所有的追踪器都断开连接，以至于校准选项不再可见，切换虚拟形象测量选项也会解除冻结。

有关 IK 2.0 引入的新行为、更改和修复的更多信息，请参阅此处的[说明](https://docs.vrchat.com/docs/v2022.2.1/latest-release)。
